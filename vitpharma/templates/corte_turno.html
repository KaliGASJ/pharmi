<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Corte de Caja - Turno #{{ turno.id }}</title>
    <style>
        /* Estilos generales */
        body {
            font-family: 'Arial', sans-serif;
            font-size: 12px;
            color: #333;
            margin: 0;
            padding: 20px;
            background-color: #fff;
        }
        
        /* Encabezado y logo */
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #004AAD;
        }
        
        .logo {
            max-width: 200px;
            margin-bottom: 10px;
        }
        
        h1, h2, h3 {
            color: #004AAD;
            margin: 0;
        }
        
        h1 {
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        h2 {
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        h3 {
            font-size: 16px;
            margin: 15px 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 1px solid #ccc;
        }
        
        /* Información general */
        .info-box {
            margin-bottom: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #004AAD;
        }
        
        .info-row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        
        .info-item {
            flex: 1;
            min-width: 45%;
            margin-bottom: 8px;
        }
        
        .info-label {
            font-weight: bold;
            color: #555;
        }
        
        .info-value {
            margin-left: 5px;
        }
        
        /* Tablas */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 12px;
        }
        
        th, td {
            padding: 8px 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        
        th {
            background-color: #004AAD;
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .text-right {
            text-align: right;
        }
        
        .total-row {
            font-weight: bold;
            background-color: #e6f2ff;
        }
        
        /* Resumen financiero */
        .financial-summary {
            margin: 20px 0;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .calculation-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4ff;
            border-radius: 5px;
            border-left: 4px solid #28a745;
        }
        
        .calculation-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .final-amount {
            font-size: 16px;
            font-weight: bold;
            color: #28a745;
            padding: 10px;
            background-color: #f0fff0;
            border-radius: 5px;
            text-align: center;
            margin-top: 15px;
        }
        
        /* Observaciones */
        .observations {
            margin: 20px 0;
            padding: 15px;
            background-color: #fff9e6;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        
        /* Firma */
        .signature-section {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
        }
        
        .signature-box {
            width: 45%;
            text-align: center;
        }
        
        .signature-line {
            margin: 50px auto 5px auto;
            width: 80%;
            border-bottom: 1px solid #333;
        }
        
        /* Pie de página */
        .footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px dashed #aaa;
            text-align: center;
            font-style: italic;
            color: #666;
            font-size: 11px;
        }
        
        .system-info {
            margin-top: 5px;
            font-size: 10px;
            color: #999;
        }
    </style>
</head>
<body>
    <!-- Encabezado -->
    <div class="header">
        <h1>{{ farmacia }}</h1>
        <h2>CORTE DE CAJA</h2>
    </div>
    
    <!-- Información general -->
    <div class="info-box">
        <div class="info-row">
            <div class="info-item">
                <span class="info-label">Turno ID:</span>
                <span class="info-value">{{ turno.id }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Vendedor:</span>
                <span class="info-value">{{ usuario.get_full_name|default:usuario.username }}</span>
            </div>
        </div>
        <div class="info-row">
            <div class="info-item">
                <span class="info-label">Fecha de inicio:</span>
                <span class="info-value">{{ fecha_inicio|date:"d/m/Y H:i" }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Fecha de cierre:</span>
                <span class="info-value">{{ fecha_fin|date:"d/m/Y H:i" }}</span>
            </div>
        </div>
    </div>
    
    <!-- Resumen de ventas por método de pago -->
    <h3>Resumen de Ventas por Método de Pago</h3>
    <table>
        <thead>
            <tr>
                <th>Método de Pago</th>
                <th class="text-right">Monto</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Efectivo</td>
                <td class="text-right">${{ monto_efectivo|floatformat:2 }}</td>
            </tr>
            <tr>
                <td>Tarjeta</td>
                <td class="text-right">${{ monto_tarjeta|floatformat:2 }}</td>
            </tr>
            <tr>
                <td>Transferencia</td>
                <td class="text-right">${{ monto_transferencia|floatformat:2 }}</td>
            </tr>
            <tr>
                <td>Cheque</td>
                <td class="text-right">${{ monto_cheque|floatformat:2 }}</td>
            </tr>
            <tr class="total-row">
                <td>TOTAL VENTAS</td>
                <td class="text-right">${{ total_turno|floatformat:2 }}</td>
            </tr>
        </tbody>
    </table>
    
    <!-- Cálculo de efectivo en caja -->
    <h3>Cálculo de Efectivo en Caja</h3>
    <div class="calculation-box">
        <div class="calculation-item">
            <span>Monto inicial en caja:</span>
            <span>${{ monto_inicial|floatformat:2 }}</span>
        </div>
        <div class="calculation-item">
            <span>Ventas en efectivo (+):</span>
            <span>${{ monto_efectivo|floatformat:2 }}</span>
        </div>
        <div class="calculation-item">
            <span>Cambios entregados (-):</span>
            <span>${{ cambios_dados|floatformat:2 }}</span>
        </div>
        <div class="final-amount">
            Efectivo final en caja: ${{ efectivo_final_en_caja|floatformat:2 }}
        </div>
    </div>
    
    <!-- Observaciones (si existen) -->
    {% if observaciones %}
    <h3>Observaciones</h3>
    <div class="observations">
        <p>{{ observaciones }}</p>
    </div>
    {% endif %}
    
    <!-- Sección de firmas -->
    <div class="signature-section">
        <div class="signature-box">
            <div class="signature-line"></div>
            <p>{{ usuario.get_full_name|default:usuario.username }}</p>
            <p>Vendedor</p>
        </div>
        <div class="signature-box">
            <div class="signature-line"></div>
            <p>Supervisor</p>
            <p>Vo.Bo.</p>
        </div>
    </div>
    
    <!-- Pie de página -->
    <div class="footer">
        <p>Este corte fue generado automáticamente por el sistema VIT PHARMA.</p>
        <p>Gracias por tu trabajo y compromiso.</p>
        <div class="system-info">
            Documento generado el {{ fecha_generacion|date:"d/m/Y H:i:s" }}
        </div>
    </div>
</body>
</html>